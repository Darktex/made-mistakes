(function(a){function d(a,b,c){var d,e,f,g,h,i,j,k,l,m=0;h=a.offset();d=h.left;f=h.top;e=d+a.outerWidth();g=f+a.outerHeight();i=b>e?e:b>d?b:d;j=c>g?g:c>f?c:f;k=Math.abs(i-b);l=Math.abs(j-c);return Math.sqrt(k*k+l*l)}function e(c){var d=c.pageX,e=c.pageY,f=-1,g=a([]);while(g[0]=b[++f]){g.triggerHandler("proximity",[d,e])}}var b=a([]),c=a(document);a.event.special.proximity={defaults:{max:100,min:0,throttle:0,fireOutOfBounds:1},setup:function(a){if(!b[0])c.mousemove(e);b=b.add(this)},add:function(b){var c=b.handler,e=a.extend({},a.event.special.proximity.defaults,b.data),f=0,g=0,h=a(this);b.handler=function(a,b,i){var j=e.max,k=e.min,l=e.throttle,m=+(new Date),n,o,p,q=e.fireOutOfBounds;if(l&&f+l>m){return}f=m;n=d(h,b,i);p=n<j&&n>k;if(q||p){if(p){g=0}else{if(typeof q==="number"&&g>q){return}++g}o=a.proximity=1-(n<j?n<k?0:n/j:1);a.distance=n;a.pageX=b;a.pageY=i;a.data=e;return c.call(this,a,o,n)}}},teardown:function(){b=b.not(this);if(!b[0])c.unbind("mousemove",e)}}})(jQuery)